<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>kafka-to-sse</title>
    <script
            src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
            integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI="
            crossorigin="anonymous"></script>
</head>
<body>
    <div id="msgarea">
    </div>
    <script>
        const sse = new EventSource('/prices');

        function processMessage(data) {
            var m = $(document.createElement("div"))
            m.text(data);
            $('#msgarea').append(m);
        }
        sse.onmessage = e => processMessage(JSON.parse(e.data));
        processMessage("Messages:")
    </script>
</body>
